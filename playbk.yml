---

- name: config
  hosts: routers
  connection: network_cli
  gather_facts: no 
  tasks:
     - name: configure provider1
       set_fact:
         provider:
           username: admin
           password: admin 

      - name: set hostname
        ios_config:
          provider:  "{{ R1 }}"
          lines: hostname {{ inventory_hostname}}

      - name: Interface IP 
        ios_config:
           provider: "{{ R1 }}"
           lines: 
           - ip add 192.168.28.1 255.255.255.255.0
           - no shu 
           - full-duplex
           parents: e1/0

      - name: Interface IP 
        ios_config:
           provider: "{{ R1 }}"
           lines: 
           - ip add 10.10.28.1 255.255.255.255.0
           - no shu 
           - full-duplex
           parents: s2/0
    

