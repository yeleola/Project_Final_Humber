---

- name: config
  hosts: routers
  connection: network_cli
  gather_facts: no 
  tasks:
     - name: configure provider1
       set_fact:
         provider:
           username: admin
           password: admin 

      - name: set hostname
        ios_config:
          provider:  "{{ provider }}"
          lines: hostname {{ inventory_hostname}}

      - name: Interface IP 
        ios_config:
           provider: "{{ R1 }}"
           lines: 
           - ip add 192.168.28.1 255.255.255.255.0
           - no shu 
           - full-duplex
           parents: e1/0

         - network 0.0.0.0 255.255.255.255 area 0

        parents: router ospf 16

- hosts: R1

  gather_facts: false

  connection: network_cli



  tasks:

    - name: configure i
    nt e1/0 interface

      ios_config:

        lines:

           - ip add 192.168.3.1 255.255.255.0

           - no shutdown

        parents: int e1/0

- hosts: R2

  gather_facts: false

  connection: network_cli


